<section class="tabs content18 cid-srn9kG2mng mbr-fullscreen" id="tabs1-14">
  <script type="application/javascript" defer src="./assets/mbr-tabs/mbr-tabs.js"></script>
  <div class="mbr-overlay" style="opacity: 0.7; background-color: rgb(255, 255, 255);"></div>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-md-11">
        <h3 class="mbr-section-title mb-0 mbr-fonts-style display-2"><strong>Редактор
          тестов</strong></h3>
      </div>
    </div>
    <div class="row justify-content-center">
      <div class="col-12">
        <ul class="nav nav-tabs mb-4" role="tablist">
          <li class="nav-item first mbr-fonts-style">
            <a class="nav-link mbr-fonts-style show active display-7"
               role="tab" data-toggle="tab" href="#tabs1-14_tab0" aria-selected="true">
              <strong>Мои тесты</strong>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link mbr-fonts-style active display-7"
               role="tab" data-toggle="tab" href="#tabs1-14_tab1" aria-selected="true">
              <strong>Тематики тестирования</strong>
            </a>
          </li>
        </ul>
        <div class="tab-content">
          <div id="tab1" class="tab-pane" role="tabpanel">
            <div class="row">
              <div class="col-md-12">
                <p class="mbr-text mbr-fonts-style display-7">
                  В данном разделе, расположены все тесты созданные вами.
                </p>
                <ul class="list-unstyled">
                  <li>Здесь вы можете:
                    <ul>
                      <li>Создать новый тест</li>
                      <li>Выбрать тест для редактирования</li>
                      <li>Удалить тест</li>
                      <!--                      <li>Назначит тест на прохождение для конкретных людей</li>-->
                    </ul>
                  </li>
                </ul>
                <div class="col-lg-12 col-md-12 col-sm-12 align-right">
                  <a class="btn btn-success display-4" routerLink="/test/new">Добавить</a>
                </div>
              </div>
            </div>
            <div class="table-responsive">
              <table class="table table-hover">
                <thead class="colorTableHeader">
                <tr>
                  <th scope="col" class="align-middle text-center">Тематика</th>
                  <th scope="col" class="align-middle text-center">Наименование</th>
                  <th scope="col" class="align-middle text-center">Описание</th>
                  <th scope="col" class="align-middle text-center">Время прохождения (мин)</th>
                  <th scope="col" class="align-middle text-center">Проходной балл</th>
                  <th scope="col" class="align-middle text-center">Действия</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let test of tests">
                  <td class="align-middle text-center">{{ getNameTopic(test.topicId) }}</td>
                  <td class="align-middle text-center">{{ test.name }}</td>
                  <td class="align-middle text-center">{{ test.description }}</td>
                  <td class="align-middle text-center">{{ test.duration }}</td>
                  <td class="align-middle text-center">{{ test.passScore }}</td>
                  <td class="align-middle text-center">
                    <a class="btn btn-info-outline btn-sm" (click)="redirectToCreateTest(test.id)"
                       style="white-space: nowrap;"><span class="mobi-mbri-edit-2"
                                                          aria-hidden="true"></span></a>
                  </td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div id="tab2" class="tab-pane" role="tabpanel">
            <div class="row">
              <div class="col-md-12">
                <p class="mbr-text mbr-fonts-style display-7">
                  В данном разделе, представлены все существующие тематики нашего сервиса.
                </p>
                <ul class="list-unstyled">
                  <li>Здесь вы можете:
                    <ul>
                      <li>Ознакомиться с существующими тематиками</li>
                      <li>Добавит собственную</li>
                    </ul>
                  </li>
                </ul>
                <div class="col-lg-12 col-md-12 col-sm-12 align-right mbr-section-btn">
                  <button class="btn btn-success display-4" (click)="openModalNewTopic()">Добавить
                  </button>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="table-responsive">
                <table class="table table-hover">
                  <thead class="colorTableHeader">
                  <tr>
                    <th scope="col" class="align-middle text-center">Наименование тематики</th>
                    <th scope="col" class="align-middle text-center">Описание</th>
                    <th scope="col" class="align-middle text-center">Связанные тесты</th>
                    <th scope="col" class="align-middle text-center">Действия</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let topic of topics">
                    <td class="align-middle text-center">{{ topic.name }}</td>
                    <td class="align-middle text-center">{{ topic.description }}</td>
                    <td class="align-middle text-center">
                        <a *ngFor="let test of topic.tests; let i = index"
                           routerLink="{{'/test/' + test.id}}">{{test.name}}{{topic.tests.length == i+1 ? '' : ', '}}
                        </a>
                    </td>
                    <td class="align-middle text-center">
                      <a class="btn btn-info-outline btn-sm" (click)="openModalEditTopic(topic.id)"
                         style="white-space: nowrap;"><span class="mobi-mbri-edit-2" aria-hidden="true"></span></a></td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <app-modal *ngIf="showModal" (close)="closeModal()">
        <div class="modal-header">
          <h4 class="align-center">{{getNameCreateButton()}} тематику</h4>
          <button type="button" class="close" data-dismiss="modal" (click)="closeModal()">&times;</button>
        </div>

        <form [formGroup]="formTopicCreate" (ngSubmit)="createTopic()">

          <div class="row modal-body">
            <div class="col-12 form-group" data-for="name">
              <label *ngIf="checkForm.checkRequired(formTopicCreate,'name')">Наименование тематики</label>
              <input formControlName="name" type="text" placeholder="Наименование раздела" data-form-field="name"
                     class="form-control" (change)="changeTopicName($event)">
              <div class="alert-danger col-12" role="alert" *ngIf="validationTopicForm.name.invalid && !isSubmitted">
                <div *ngIf="validationTopicForm.name.errors.required">Поле обязательно для заполнения</div>
              </div>
            </div>

            <div class="col-12 form-group" data-for="textarea">
              <label *ngIf="checkForm.checkRequired(formTopicCreate,'description')">Описание</label>
              <textarea (change)="changeTopicDescription($event)" formControlName="description"
                        name="description" placeholder="Описание" class="form-control"></textarea>
              <div class="col-12 form-group alert-danger" role="alert"
                   *ngIf="validationTopicForm.submitted && isCreateTopicFailed">
                Ошибка при добавление тематики: <p>{{ errorMessage }}</p>
              </div>
            </div>

            <div class="col-12 modal-footer">
              <div class="col-md col-sm-12">
                <a type="submit" (click)="createTopic()" class="btn btn-success display-4">{{getNameUpdateButton()}} тематику</a>
              </div>
              <div class="col-md col-sm-12" *ngIf="topic.id != null">
                <a (click)="deleteTopic()" class="btn btn-danger display-4">Удалить</a>
              </div>
            </div>

          </div>
        </form>
      </app-modal>
    </div>
  </div>
  <app-modal-outlet></app-modal-outlet>
</section>
