<section class="cid-srmGhZz8Eh mbr-fullscreen">
  <div class="mbr-overlay" style="opacity: 0.7; background-color: rgb(255, 255, 255);"></div>
  <div class="container">
    <div *ngIf="!startTest" class="row justify-content-center">
      <div class="col-12 col-lg-6">
        <div class="dragArea row">
          <div class="col-sm-3 form-group">
            <a class="btn-sm btn-info display-8" routerLink="/tests">Назад</a>
          </div>
        </div>
        <div class="card-wrapper">
          <div class="card-box align-left">
            <h4 class="card-title mbr-fonts-style mb-4 display-2">
              <strong>{{test.name}}</strong>
            </h4>
            <p class="mbr-text mbr-fonts-style mb-4 display-7">
              Тематика: {{getNameTopic(test.topicId)}}
            </p>
            <div class="mbr-section-btn">
              <a class="btn btn-primary-outline display-2 myWidth" (click)="playTest()">НАЧАТЬ</a>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-6">
        <div class="item mbr-flex">
          <div class="icon-box">
            <span class="mbr-iconfont mobi-mbri-globe-2 mobi-mbri"></span>
          </div>
          <div class="text-box">
            <h4 class="icon-title mbr-black mbr-fonts-style display-7">
              <strong>Разделы теста</strong>
            </h4>
            <h5 class="icon-text mbr-black mbr-fonts-style display-4">
              <ul class="list-unstyled">
                <li *ngFor="let chapter of test.chapters">{{chapter.name}}</li>
              </ul>
            </h5>
          </div>
        </div>
        <div class="item mbr-flex">
          <div class="icon-box">
            <span class="mbr-iconfont mobi-mbri-info mobi-mbri"></span>
          </div>
          <div class="text-box">
            <h4 class="icon-title mbr-black mbr-fonts-style display-7">
              <strong>Описание</strong>
            </h4>
            <h5 class="icon-text mbr-black mbr-fonts-style display-4">{{test.description}}</h5>
          </div>
        </div>
        <div class="item mbr-flex">
          <div class="icon-box">
            <span class="mbr-iconfont mobi-mbri-clock mobi-mbri"></span>
          </div>
          <div class="text-box">
            <h4 class="icon-title mbr-black mbr-fonts-style display-7">
              <strong>Время прохождения (минуты): {{test.duration}}</strong>
            </h4>
            <h5 class="icon-text mbr-black mbr-fonts-style display-4">
              После начала тестирования, приостановить тест не возможно.
            </h5>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="startTest">
      <form [formGroup]="formUserAnswer" (ngSubmit)="saveAnswer(false)"
            class="mbr-form form-with-styler">
        <div class="row">
          <div class="col-12 form-group noselect" data-for="name">
            <h4 class="align-center">{{question.question}}</h4>
          </div>

          <div class="col col-12 form-group"
               *ngIf="questionType.name == 'Вопрос со свободным ответом'">
            <div class="col-12 form-group">
              <h5 class="align-left">Ваш ответ:</h5>
            </div>
            <div class="col-12 form-group">
              <textarea (change)="changeFreeAnswer($event)" name="answer"
                        placeholder="Ответ в свободной форме"
                        class="form-control" [value]="freeAnswer"></textarea>
            </div>
          </div>

          <div class="col col-12 form-group" *ngIf="questionType.name == 'Одиночный'">
            <div class="row">
              <div class="col-12 form-group">
                <h5 class="align-left">Варианты ответа:</h5>
              </div>
              <div class="col-12 form-group">
                <div *ngFor="let answer of question.answers" class="col-12 form-check">
                  <input id="{{answer.id}}" type="radio" class="form-check-input"
                         value="{{answer.answer}}"
                         (change)="changeRadioButtonAnswer($event)" name="answer">
                  <label class="form-check-label form-group"
                         for="{{answer.id}}">{{answer.answer}}</label>
                </div>
              </div>
            </div>
          </div>

          <div class="col col-12 form-group" *ngIf="questionType.name == 'Множественный'">
            <div class="row">
              <div class="col-12 form-group">
                <h7 class="align-center">Варианты ответа:</h7>
              </div>
              <div class="col-12 form-group">
                <div class="col-12 form-check" [formGroup]="formCheckboxAnswer">
                  <div *ngFor="let answer of question.answers">
                    <label>
                      <input type="checkbox" class="form-check-input" content="{{answer.id}}" [value]="answer.answer"
                             (change)="changeCheckboxAnswer($event)"/>
                      {{answer.answer}}
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-12 col-lg-6"></div>
          <div class="col-md col-sm-12 form-group" data-for="name">
            <button type="submit" class="btn btn-primary display-4">Дальше</button>
          </div>
        </div>
      </form>
    </div>

    <div *ngIf="startTest" class="col-12 col-lg-6">
      <div class="card-wrapper">
        <div class="card-box align-left">
          <div>
            <div class="item mbr-flex">
              <div class="icon-box">
                <span class="mbr-iconfont mobi-mbri-clock mobi-mbri"></span>
              </div>
              <div class="text-box">
                <h4 class="icon-title mbr-black mbr-fonts-style display-7">
                  <strong>{{timeHours == 0 ? '00' : timeHours < 10 ? '0' + timeHours : timeHours }}:{{timeMinute == 0 ? '00' : timeMinute < 10 ? '0' + timeMinute : timeMinute}}:{{timeSecond == 0 ? '00' : timeSecond < 10 ? '0' + timeSecond : timeSecond }}</strong>
                </h4>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
