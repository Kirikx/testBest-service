<section class="cid-srmGhZz8Eh mbr-fullscreen">
  <div class="mbr-overlay" style="opacity: 0.7; background-color: rgb(255, 255, 255);"></div>
  <div class="container">
    <div class="row justify-content-lg-start">
      <div class="col-12 col-lg-6">
        <div class="col-sm-12 form-group">
          <a class="btn-sm btn-info display-8" routerLink="/tests">Назад</a>
        </div>
      </div>
    </div>

    <div class="row">
      <div *ngIf="isTimer" class="col-12 form-group">
        <h3 class="align-center">Время прохождения теста вышло!</h3>
      </div>
      <div class="col-12 form-group">
        <h4 class="align-center">{{test.name}}</h4>
      </div>
    </div>

    <div class="row justify-content-center">

      <div class="col-12 col-lg-6">
        <div class="item mbr-flex">
          <div class="icon-box">
            <span class="mbr-iconfont mobi-mbri-globe-2 mobi-mbri"></span>
          </div>
          <div class="text-box">
            <h4 class="icon-title mbr-black mbr-fonts-style display-7">
              <strong>Разделы теста</strong>
            </h4>
            <h5 class="icon-text mbr-black mbr-fonts-style display-4">
              <ul class="list-unstyled">
                <li *ngFor="let chapter of test.chapters">{{chapter.name}}</li>
              </ul>
            </h5>
          </div>
        </div>
        <div *ngIf="test.description != null" class="item mbr-flex">
          <div class="icon-box">
            <span class="mbr-iconfont mobi-mbri-info mobi-mbri"></span>
          </div>
          <div class="text-box">
            <h4 class="icon-title mbr-black mbr-fonts-style display-7">
              <strong>Описание</strong>
            </h4>
            <h5 class="icon-text mbr-black mbr-fonts-style display-4">{{test.description}}</h5>
          </div>
        </div>
        <div class="item mbr-flex">
          <div class="icon-box">
            <span class="mbr-iconfont mobi-mbri-clock mobi-mbri"></span>
          </div>
          <div class="text-box">
            <h4 class="icon-title mbr-black mbr-fonts-style display-7">
              <strong>Время отведенное на тест:</strong>
            </h4>
            <h5 class="icon-text mbr-black mbr-fonts-style display-4">{{test.duration}} мин.</h5>
          </div>
        </div>
      </div>

      <div class="col-12 col-lg-6">
        <div class="item mbr-flex">
          <div class="icon-box">
            <span class="mbr-iconfont mobi-mbri-watch mobi-mbri"></span>
          </div>
          <div class="text-box">
            <h4 class="icon-title mbr-black mbr-fonts-style display-7">
              <strong>Проходили тестирование</strong>
            </h4>
            <h5 class="icon-text mbr-black mbr-fonts-style display-4">Дата: {{userTest.finished.split("T")[0]}}</h5>
            <h5 class="icon-text mbr-black mbr-fonts-style display-4">Время прохождения:
              {{userTest.started.split("T")[1]}} - {{userTest.finished.split("T")[1]}}</h5>
          </div>
        </div>
        <div *ngIf="!userTest.isPassed" class="item mbr-flex">
          <div class="icon-box-fail">
            <span class="mbr-iconfont mobi-mbri-error mobi-mbri" style=""></span>
          </div>
          <div class="text-box">
            <h4 class="icon-title mbr-black mbr-fonts-style display-7">
              <strong>Тест не пройден</strong>
            </h4>
            <h5 class="icon-text mbr-black mbr-fonts-style display-4">Минимальное количество правильных
              ответов: {{test.passScore}}</h5>
            <h5 class="icon-text mbr-black mbr-fonts-style display-4">Вы ответили правильно: {{passedQuestion}}</h5>
          </div>
        </div>
        <div *ngIf="userTest.isPassed" class="item mbr-flex">
          <div class="icon-box-passed">
            <span class="mbr-iconfont mobi-mbri-success mobi-mbri" style=""></span>
          </div>
          <div class="text-box">
            <h3 class="icon-title mbr-black mbr-fonts-style display-7">
              <strong>Тест пройден</strong>
            </h3>
            <h5 class="icon-text mbr-black mbr-fonts-style display-4">Минимальное количество правильных
              ответов: {{test.passScore}}</h5>
            <h5 class="icon-text mbr-black mbr-fonts-style display-4">Вы ответили правильно: {{passedQuestion}}</h5>
          </div>
        </div>
        <div class="card-wrapper">
          <div class="card-box align-left">
            <div class="mbr-section-btn">
              <a class="btn btn-primary-outline display-2 myWidth" routerLink="{{'/test/'+test.id+'/user'}}">ПЕРЕПРОЙТИ</a>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="checkFullAnswer()" class="col-12 form-group">
        <h3 class="align-center">Вы не допустили ошибок!</h3>
      </div>

      <div *ngIf="!checkFullAnswer()" class="col-12 form-group">
        <h4 class="align-center">Допущенные ошибки:</h4>
      </div>

      <div class="row col-12 form-group" *ngIf="!checkFullAnswer()">
        <div class="row col-12" *ngFor="let fail of userQuestion">
          <div class="col-12 col-lg-6">
            <div class="item mbr-flex">
              <div class="icon-box">
                <span class="mbr-iconfont mobi-mbri-help mobi-mbri"></span>
              </div>
              <div class="text-box">
                <h4 class="icon-title mbr-black mbr-fonts-style display-7">
                  <strong>Вопрос:</strong>
                </h4>
                <h5 class="icon-text mbr-black mbr-fonts-style display-4">
                  {{getQuestion(fail.questionId)}}
                </h5>
              </div>
            </div>
          </div>

          <div class="col-12 col-lg-6">
            <div class="item mbr-flex">
              <div class="icon-box-fail">
                <span class="mbr-iconfont mobi-mbri-info mobi-mbri"></span>
              </div>
              <div class="text-box" *ngIf="fail.answers.length > 0">
                <h4 class="icon-title mbr-black mbr-fonts-style display-7">
                  <strong>Ответы:</strong>
                </h4>
                <h5 class="icon-text mbr-black mbr-fonts-style display-4" *ngFor="let answer of fail.answers">
                  {{answer.answer}}</h5>
              </div>
              <div class="text-box" *ngIf="fail.answers.length == 0 && fail.freeAnswer != null">
                <h4 class="icon-title mbr-black mbr-fonts-style display-7">
                  <strong>Ответ:</strong>
                </h4>
                <h5 class="icon-text mbr-black mbr-fonts-style display-4">{{fail.freeAnswer}}</h5>
              </div>
              <div class="text-box" *ngIf="fail.answers.length == 0 && fail.freeAnswer == null">
                <h4 class="icon-title mbr-black mbr-fonts-style display-7">
                  <strong>Ответ:</strong>
                </h4>
                <h5 class="icon-text mbr-black mbr-fonts-style display-4">Вы не дали ответ</h5>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

